import os
import shutil

main_path = "C:\\Users\\benjamin.petit\\Documents\\Juliet_Test_Suite_11CWE\\Java\\src"
dest_folder_path = "C:\\Users\\benjamin.petit\\Documents\\Juliet_Test_Suite_11CWE_01java_only\\Java\\src\\testcases"
os.chdir(main_path)
current_folder = ""
for root, dirs, files in os.walk("."):
    path = root.split(os.sep)
    print(path)
    if len(path) <= 4:
        if os.path.basename(root).startswith("s0"):
            if path[-2].startswith("CWE"):
                try:
                    os.mkdir(f'{dest_folder_path}\\{path[-2]}')
                except:
                    pass
                try:
                    os.mkdir(f'{dest_folder_path}\\{path[-2]}\\{os.path.basename(root)}')
                except:
                    pass
            current_folder = os.path.basename(root)
        print((len(path) - 1) * '---', os.path.basename(root))
        for file in files:
            if file.endswith("01.java") or file.endswith(".xml"):
                print(path)
                print(len(path) * '---', file)
                shutil.copyfile(f'{root}\\{file}', f'{dest_folder_path}\\{path[-2]}\\{current_folder}\\{file}')