import os
import shutil


def select_and_copy_compilable_files(src_folder, dest_folder):
    #From a src folder where the files are .java and .class
    #Copy the .java when the .class exists
    try:
        os.mkdir(dest_folder)
    except:
        pass

    for file in os.listdir(src_folder):
        if file.endswith(".class"):
            equivalent_java_file = os.path.splitext(file)[0]+".java"
            shutil.copy(os.path.join(src_folder,equivalent_java_file),
                        os.path.join(dest_folder,equivalent_java_file))


if __name__ == "__main__":
    predictions_folder = "C:/Users/benjamin.petit/Documents/Seq2seq/OpenNMT_5CWE_InferOK_token_less_150_Obfuscated/fold0/results/test_beam5_iter10000"
    dest_folder_for_Infer = "C:/Users/benjamin.petit/Documents/Seq2seq/OpenNMT_5CWE_InferOK_token_less_150_Obfuscated/fold0/results/test_beam5_iter10000_Infer"
    select_and_copy_compilable_files(predictions_folder, dest_folder_for_Infer)