<!---->
<project name="Testcases_per_CWE" default="war" basedir=".">
  <description>
    Java TestCases Build File
  </description>

  <!-- set global properties for this build -->
  <property name="src" location="."/>
  <property name="build" location="antbuild"/>
  <property name="dist" location="antdist"/>
  <basename property="parentdir.basename" file=".."/>
  <basename property="basedir.basename" file="."/>
  <property name="war" location="${basedir.basename}.war"/>
  <property name="jar" location="${basedir.basename}.jar"/>

  <!-- Required libraries -->
  <property name="servlet.jar" location="lib/servlet-api.jar"/>
  <property name="commons-lang.jar" location="lib/commons-lang-2.5.jar"/>
  <property name="commons-codec.jar" location="lib/commons-codec-1.5.jar"/>
  <property name="javamail.jar" location="lib/javamail-1.4.4.jar"/>
  <path id="project.classpath">
    <pathelement location="${servlet.jar}"/>
	  <pathelement location="${commons-lang.jar}"/>
	  <pathelement location="${commons-codec.jar}"/>
	  <pathelement location="${javamail.jar}"/>
	  <pathelement location="${build}"/>
  </path>
   
  <target name="init">
    <!-- Create the time stamp -->
    <tstamp />

    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init" description="compile the source">
    <!-- Compile the support files first, other than the Mains -->
    <javac includeantruntime="false"
      srcdir="${src}"
      destdir="${build}"
      debug="true"
      debuglevel="lines,vars,source"
      fork="true"
      memoryinitialsize="2048m"
      memorymaximumsize="2048m"
      excludes="*Main.java"> <!--Don't use the Mains in testcasesupport -->
      <classpath refid="project.classpath"/>
      
    </javac>
	
    <!-- Compile everything in this directory -->
    <javac includeantruntime="false"
      srcdir="${src}" 
      destdir="${build}"
      debug="true"
      debuglevel="lines,vars,source"
      fork="true"
      memoryinitialsize="2048m"
      memorymaximumsize="2048m"> 
      <classpath refid="project.classpath"/>
      <include name="testcases/${parentdir.basename}/${basedir.basename}/*"/>
    </javac>
  </target>


  <target name="clean" description="clean up" >
    <!-- Delete the ${build} directory tree -->
    <delete dir="${build}"/>
  </target>
  
  
</project>
